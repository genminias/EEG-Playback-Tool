(this["webpackJsonpEEG-Playback-Tool"]=this["webpackJsonpEEG-Playback-Tool"]||[]).push([[0],{14:function(e,t,n){e.exports=n(31)},28:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=28},30:function(e,t,n){},31:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(8),l=n(2),i=n(3),u=n(1),o=n(10),s=n(11),m=n.n(s),f=new o.Notion({autoSelectDevice:!1}),d={selectedDevice:null,status:null,user:null,loadingUser:!0},b=Object(a.createContext)(),v=function(){return Object(a.useContext)(b)};function E(e){var t=e.children,n=function(){var e=m()("deviceId"),t=Object(u.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(Object(i.a)({},d)),l=Object(u.a)(r,2),o=l[0],s=l[1],b=o.user,v=o.selectedDevice,E=Object(a.useCallback)((function(e){s((function(t){return Object(i.a)(Object(i.a)({},t),{},{selectedDevice:e})}))}),[]);Object(a.useEffect)((function(){b&&!v&&f.selectDevice((function(e){return n?e.find((function(e){return e.deviceId===n})):e[0]}))}),[b,n,v]),Object(a.useEffect)((function(){if(v){var e=f.status().subscribe((function(e){s((function(t){return Object(i.a)(Object(i.a)({},t),{},{status:e})}))}));return function(){e.unsubscribe()}}}),[v]),Object(a.useEffect)((function(){s((function(e){return Object(i.a)(Object(i.a)({},e),{},{loadingUser:!0})}));var e=f.onAuthStateChanged().subscribe((function(e){s((function(t){return Object(i.a)(Object(i.a)({},t),{},{user:e,loadingUser:!1})}))}));return function(){e.unsubscribe()}}),[]),Object(a.useEffect)((function(){var e=f.onDeviceChange().subscribe((function(e){E(e),c(e.deviceId)}));return function(){e.unsubscribe()}}),[E,c]);var O=Object(a.useCallback)((function(){return new Promise((function(e){f.logout().then(e),s(Object(i.a)(Object(i.a)({},d),{},{loadingUser:!1}))}))}),[]);return Object(i.a)(Object(i.a)({},o),{},{lastSelectedDeviceId:n,setLastSelectedDeviceId:c,logoutNotion:O,setSelectedDevice:E})}();return c.a.createElement(b.Provider,{value:n},t)}function O(){var e=v(),t=e.user,n=e.lastSelectedDeviceId,r=Object(a.useState)([]),i=Object(u.a)(r,2),o=i[0],s=i[1],m=Object(a.useState)(""),d=Object(u.a)(m,2),b=d[0],E=d[1],O=Object(a.useState)(!0),g=Object(u.a)(O,2),j=g[0],p=g[1],h=Object(a.useState)(!1),N=Object(u.a)(h,2),S=N[0],y=N[1],D=Object(a.useState)(""),k=Object(u.a)(D,2),w=k[0],C=k[1];return Object(a.useEffect)((function(){t&&!S&&(p(!0),f.getDevices().then((function(e){s(e),e.length&&E(n||e[0].deviceId)})).catch((function(e){C(e.message)})).finally((function(){p(!1)})))}),[t,n,S]),c.a.createElement("main",{className:"main-container"},c.a.createElement("form",{className:"card login-form",onSubmit:function(e){e.preventDefault(),y(!0),f.selectDevice((function(e){return e.find((function(e){return e.deviceId===b}))})).then((function(){Object(l.c)("/")})).catch((function(e){C(e.message)}))}},c.a.createElement("h3",{className:"card-heading"},"Devices"),w?c.a.createElement("h4",{className:"card-error"},w):null,c.a.createElement("div",{className:"row"},c.a.createElement("label",null,"Select a Device"),c.a.createElement("select",{name:"deviceSelect",value:b,disabled:j,onChange:function(e){return E(e.target.value)}},o.map((function(e){return c.a.createElement("option",{key:e.deviceId,value:e.deviceId},e.deviceNickname||e.modelName)})))),c.a.createElement("div",{className:"row"},c.a.createElement("button",{type:"submit",className:"card-btn",disabled:j},j?"Loading Devices...":"Select"))))}function g(){return c.a.createElement("div",{className:"loading-container"},c.a.createElement("div",{className:"loading-spinner"}))}var j=n(5),p=n.n(j),h=n(12),N=n(13),S=n.n(N);function y(e){var t=e.onLogin,n=e.loading,r=e.error,l=e.footerComponent,i=Object(a.useState)(""),o=Object(u.a)(i,2),s=o[0],m=o[1],f=Object(a.useState)(""),d=Object(u.a)(f,2),b=d[0],v=d[1];return c.a.createElement("form",{className:"card login-form",onSubmit:function(e){e.preventDefault(),t({email:s,password:b})}},c.a.createElement("h3",{className:"card-heading"},"Login"),r?c.a.createElement("h4",{className:"card-error"},r):null,c.a.createElement("div",{className:"row"},c.a.createElement("label",null,"Email"),c.a.createElement("input",{type:"email",value:s,disabled:n,onChange:function(e){return m(e.target.value)}})),c.a.createElement("div",{className:"row"},c.a.createElement("label",null,"Password"),c.a.createElement("input",{type:"password",value:b,disabled:n,onChange:function(e){return v(e.target.value)}})),c.a.createElement("div",{className:"row"},c.a.createElement("button",{type:"submit",className:"card-btn",disabled:n},n?"Logging in...":"Login")),l)}function D(){return c.a.createElement("footer",{className:"card-footer"},c.a.createElement("a",{className:"card-link card-footer-cta",href:"https://github.com/neurosity/notion-react-starter",target:"_blank",rel:"noopener noreferrer"},"View source code"),c.a.createElement("div",{className:"card-footer-credits"},"Built by"," ",c.a.createElement("a",{className:"card-link",href:"https://neurosity.co",target:"_blank",rel:"noopener noreferrer"},"Neurosity")))}function k(){var e=v(),t=e.user,n=e.lastSelectedDeviceId,r=e.setSelectedDevice,i=Object(a.useState)(""),o=Object(u.a)(i,2),s=o[0],m=o[1],d=Object(a.useState)(""),b=Object(u.a)(d,2),E=b[0],O=b[1],g=Object(a.useState)(""),j=Object(u.a)(g,2),N=j[0],k=j[1],w=Object(a.useState)(!1),C=Object(u.a)(w,2),I=C[0],L=C[1];function U(){k(""),m(""),O("")}return S()((function(){t&&Object(l.c)("/")})),Object(a.useEffect)((function(){function e(){return(e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return L(!0),e.next=3,f.login({email:s,password:E}).catch((function(e){k(e.message)}));case 3:e.sent&&(U(),n?Object(l.c)("/"):Object(l.c)("/devices")),L(!1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}s&&E&&function(){e.apply(this,arguments)}()}),[s,E,k,n,r]),c.a.createElement("main",{className:"main-container"},c.a.createElement(y,{onLogin:function(e){var t=e.email,n=e.password;t&&n?(k(""),m(t),O(n)):k("Please fill the form")},error:N,loading:I,footerComponent:c.a.createElement(D,null)}))}function w(){var e=v().logoutNotion;return Object(a.useEffect)((function(){e().then((function(){Object(l.c)("/")}))}),[e]),null}var C={booting:"Starting OS...",shuttingOff:"Shutting off...",updating:"Updating OS...",online:"Online",offline:"Offline"},I={booting:"darkslategrey",shuttingOff:"darkslategrey",updating:"orange",online:"limegreen",offline:"crimson"};function L(){var e=v(),t=e.status,n=e.selectedDevice,a=t||{},r=a.state,i=a.charging,u=a.battery,o=a.sleepMode;return t?c.a.createElement("aside",null,n?c.a.createElement("h3",{className:"card-heading"},c.a.createElement(l.a,{to:"/devices",title:"My Devices",className:"unstyled-link"},c.a.createElement("span",{role:"img","aria-label":"My Devices"},"\u2699\ufe0f"),"\xa0\xa0",n.deviceNickname)):null,c.a.createElement("div",{className:"status-item status-state"},c.a.createElement("span",{className:"status-indicator",style:{background:U(r)}}),r in C?C[r]:r),"offline"!==r?c.a.createElement("div",{className:"status-item status-battery"},c.a.createElement(x,null)," \xa0",i?"Charging":"Charged","\xa0",u,"%"):null,o&&"offline"!==r?c.a.createElement("div",{className:"status-item status-sleep-mode"},c.a.createElement(M,null)," \xa0Sleep mode"):null):c.a.createElement("div",null,"Connecting to device...")}function U(e){return e in I?I[e]:I.offline}function x(){return c.a.createElement("span",{role:"img","aria-label":"Electricity"},"\u26a1")}function M(){return c.a.createElement("span",{role:"img","aria-label":"The Moon"},"\ud83c\udf19")}function P(){return c.a.createElement("nav",{className:"card"},c.a.createElement(L,null),c.a.createElement("button",{onClick:function(){Object(l.c)("/logout")},className:"card-btn"},"Logout"),c.a.createElement(D,null))}function T(){var e=v().user,t=Object(a.useState)(0),n=Object(u.a)(t,2),r=n[0],i=n[1];return Object(a.useEffect)((function(){e||Object(l.c)("/login")}),[e]),Object(a.useEffect)((function(){if(e){var t=f.calm().subscribe((function(e){var t=Math.trunc(100*e.probability);i(t)}));return function(){t.unsubscribe()}}}),[e]),c.a.createElement("main",{className:"main-container"},e?c.a.createElement(P,null):null,c.a.createElement("div",{className:"calm-score"},"\xa0",r,"% ",c.a.createElement("div",{className:"calm-word"},"Calm")))}function _(){return c.a.createElement(E,null,c.a.createElement(B,null))}function B(){var e=v(),t=e.user,n=e.loadingUser;return Object(a.useEffect)((function(){n||t||Object(l.c)("/login")}),[t,n]),n?c.a.createElement(g,null):c.a.createElement(l.b,null,c.a.createElement(T,{path:"/"}),c.a.createElement(O,{path:"/devices"}),c.a.createElement(k,{path:"/login"}),c.a.createElement(w,{path:"/logout"}))}n(30);Object(r.render)(c.a.createElement(_,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.582f19db.chunk.js.map